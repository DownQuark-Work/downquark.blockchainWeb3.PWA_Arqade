@use 'sass:map';
@use 'sass:meta';
@use 'sass:selector';
@use 'sass:string';

@use 'fonts' as fnts;
@use 'typography';

@use 'tokens/colors';
@use 'tokens/content';
@use 'tokens/dimensions';
@use 'tokens/fonts';
@use 'tokens/quarks';
@use 'tokens/typography';

@use '../abstracts/downquark';

// "Officially" deprecating this in favor of organizing by Quarks
      // Keeping for overview in storybook
@mixin formatBaseColors($orig, $flag, $val) {
  $srch:'dqColorBase';
  $rplc:'--dq-color-base-';
  $index: string.index($orig, $srch);
  @if $index {
    $rootKey: $rplc + string.to-lower-case(string.slice($orig, string.length($srch)+1, string.length($orig))) + '-' + $flag;
    // @debug $rootKey,$val;
    #{$rootKey}: $val;
  }
}
// @debug downquark.$dq-var-Quarks;
@mixin formatQuarkAbstraction($orig, $flag, $val) {
  $isQuark: string.index($orig, 'dqQuark');
  $isColor: string.index($orig, 'Color');
  $isPrimary: string.index($orig, 'Primary');
  // @debug meta.type-of($isColor);
  @if $isQuark { // is a quark token
  @if $isColor { // is a color token
    $rootKey: '--dq-quark-' + string.to-lower-case(string.slice(string.slice($orig,0,$isColor - 1), string.length('dqQuark')+1, string.length($orig) - string.length('Color'))) + '-color-';
    @if $isPrimary { $rootKey: $rootKey + 'main-'; }
    @else { $rootKey: $rootKey + 'alt-'; }
    $rootKey: $rootKey + $flag;
    #{$rootKey}: $val;
  }
  }
}

:root {
  // dynamically extends dq-var-CoreColors base colors with lighter, darker, complementary colors
    // "Officially" deprecating this in favor of organizing by Quarks
      // Keeping for overview in storybook
  @each $orig, $nst in downquark.$dq-var-CoreColors {
    @each $flag, $val in $nst {
      @include formatBaseColors($orig, $flag, $val);
    }
  }
  @each $orig, $nst in downquark.$dq-var-QuarkColor {
    @each $flag, $val in $nst {
      @include formatQuarkAbstraction($orig, $flag, $val);
    }
  }

  --dq-accent-primary: var(--dq-quark-hub-accent-primary);
  --dq-accent-secondary: var(--dq-quark-hub-accent-secondary);
  --dq-accent-tertiary: var(--dq-quark-hub-accent-tertiary);
  --dq-color-main-darker: var(--dq-quark-hub-color-main-darker);
  --dq-color-main-dark: var(--dq-quark-hub-color-main-dark);
  --dq-color-main-default: var(--dq-quark-hub-color-main-default);
  --dq-color-main-light: var(--dq-quark-hub-color-main-light);
  --dq-color-main-lighter: var(--dq-quark-hub-color-main-lighter);
  --dq-color-main-complement: var(--dq-quark-hub-color-main-complement);
  --dq-color-alt-darker: var(--dq-quark-hub-color-alt-darker);
  --dq-color-alt-dark: var(--dq-quark-hub-color-alt-dark);
  --dq-color-alt-default: var(--dq-quark-hub-color-alt-default);
  --dq-color-alt-light: var(--dq-quark-hub-color-alt-light);
  --dq-color-alt-lighter: var(--dq-quark-hub-color-alt-lighter);
  --dq-color-alt-complement: var(--dq-quark-hub-color-alt-complement);
  --dq-typography-h1-font: var(--dq-quark-hub-typography-h1-font);
  --dq-typography-h1-margin: var(--dq-quark-hub-typography-h1-margin);
  --dq-typography-h2-font: var(--dq-quark-hub-typography-h2-font);
  --dq-typography-h2-margin: var(--dq-quark-hub-typography-h2-margin);
  --dq-typography-h3-font: var(--dq-quark-hub-typography-h3-font);
  --dq-typography-h3-margin: var(--dq-quark-hub-typography-h3-margin);
  --dq-typography-h4-font: var(--dq-quark-hub-typography-h4-font);
  --dq-typography-h4-margin: var(--dq-quark-hub-typography-h4-margin);
  --dq-typography-h5-font: var(--dq-quark-hub-typography-h5-font);
  --dq-typography-h5-margin: var(--dq-quark-hub-typography-h5-margin);
  --dq-typography-text-font: var(--dq-quark-hub-typography-text-font);
  --dq-typography-text-margin: var(--dq-quark-hub-typography-text-margin);
}

